# SPDX-FileCopyrightText: 2024 Eli Array Minkoff
#
# SPDX-License-Identifier: 0BSD

# shellcheck: shell=bash


aoc_setup () {

local pylibdir="$(dirname "$(realpath "${BASH_SOURCE[0]}")")/pylib"
local mypystubdir="$pylibdir/.mypy_stubs"

    # surround with colons to simplify matching if pylibdir is at an end
    case ":$PYTHONPATH:" in
        # do nothing if pylibdir is already in PYTHONPATH
        *":$pylibdir:"*) : ;;
        # if PYTHONPATH is empty, set it to pylibdir
        ::) export PYTHONPATH="$pylibdir" ;;
        # if PYTHONPATH is non-empty, append it
        *) export PYTHONPATH="$PYTHONPATH:$pylibdir" ;;
    esac

    case ":$MYPYPATH:" in
        *":$mypystubdir:"*) : ;;
        ::) export MYPYPATH="$mypystubdir" ;;
        *) export MYPYPATH="$MYPYPATH:$mypystubdir" ;;
    esac
    cd "$pylibdir/../.."
}

aoc_setup
unset -f aoc_setup
byobu -S tooling/byobusock
# vi: ft=bash
